#include <iostream>
#include <vector>
#include <string>

using namespace std;

typedef long long int64;
typedef vector<int64> vi;
typedef vector<vi > vvi;

vvi I(2, vi(2, 0)), a(2, vi(2, 0));

void printmat(string str, const vvi& a) {
	cout << str << endl;
	cout << endl;
	for (int i = 0; i < 2; i++) {
		for (int j = 0; j < 2; j++) {
			cout << a[i][j] << " ";
		}
		cout << endl;
	}
	cout << endl;
}

vvi matmul(const vvi& a,const vvi& b, int64& base) {
	//printmat("a:", a);
	//printmat("b:", b);
	vvi c(2, vi(2, 0));
	for (int i = 0; i < 2; i++) {
		for (int j = 0; j < 2; j++) {
			for (int k = 0; k < 2; k++) {
				c[i][j] += a[i][k] * b[k][j];
				c[i][j] %= base;
			}
		}
	}
	//printmat("C:",c);
	return c;
}

vvi matpow(const vvi& a, const int64& p, int64& b) {
	if (p == 0) return I;
	if (p == 1) return a;
	if (p % 2 == 0) {
		vvi tmp = matpow(a, p / 2, b);
		return matmul(tmp, tmp, b);
	}
	if (p % 2 == 1) {
		vvi tmp = matpow(a, p - 1, b);
		return matmul(tmp, a, b);
	}
}

int main() {
	a[0][0] = 0; a[0][1] = 1;
	a[1][0] = 1; a[1][1] = 1;
	I[0][0] = 1; I[1][1] = 1;
	int64 cs = 1, n, b;
	while (cin >> n >> b && (n || b)) {
		cout << "Case " << cs++ << ": " << n << " " << b << " ";
		vvi ans = matpow(a, n+1, b);
		cout << ans[1][0] << endl;
	}
	/*n = 0, b=100;
	while (n<10) {
		cout << "Case " << cs++ << ": " << n << " " << b << " ";
		vvi ans = matpow(a, n + 1, b);
		cout << ans[1][0] << endl;
		n++;
	}*/
}